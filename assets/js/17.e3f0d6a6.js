(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{368:function(s,n,a){"use strict";a.r(n);var e=a(2),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("首先，打印肯定可以直接window.print()就能打印，这没什么好讲，所以，在这里我探讨的是如何实现定制化的表。")]),s._v(" "),n("p",[s._v("有以下几个方案。")]),s._v(" "),n("h1",{attrs:{id:"一-第三方插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-第三方插件"}},[s._v("#")]),s._v(" 一 第三方插件")]),s._v(" "),n("p",[s._v("使用第三方插件，vxe-table，是个十分成熟的表库，使用高级表"),n("code",[s._v("<vxe-grid v-bind='data'/>")]),s._v("能实现诸多效果，特别很多参数支持函数，增强定制化的能力，merge-cells、cell-styles、header-styles；此外还有单选、多选，可以跨行选中。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/961e45899a544ee890b7dc99a1863474~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),n("p",[s._v("直接用表时，有个问题，就是边框线比表内部的线细。用cell-styles可以实现表之间、表的边框的线粗细一致。原理是利用columnIndex、rowIndex二者是否为0，划分为四种情况，刚好返回4种样式。就完美达成了效果。")]),s._v(" "),n("h2",{attrs:{id:"vxe-table-直接设置cell-styles"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vxe-table-直接设置cell-styles"}},[s._v("#")]),s._v(" vxe-table 直接设置cell-styles")]),s._v(" "),n("p",[s._v("直接设置cell-styles的border，将会发现，表中间的线很粗，四边的线很细，代码如下")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("    gridHeadOptionsTable1(item) {\n      const isShowWeight = this.isShowWeight(item);\n      let data = [\n        { col1: '99', col2: '', col5: '44', col6: '' },\n        { col1: '33', col2: '', col3: '77', col4: '', col5: '111', col6: '' }\n      ];\n      return {\n        showHeader: false,\n        minHeight: '100',\n        align: 'center',\n        // cellStyle: this.resetTableCenterBorder(),\n        cellStyle: {\n          'background-color': 'white',\n          'border-collapse': 'collapse',\n          'border-color': 'black',\n          'background-image': 'none',\n          'font-size': '17px',\n          'font-weight': 600,\n          border: '1px solid black',\n          color: 'black',\n          padding: '3px 10px'\n        },\n        columns: [\n          { field: 'col1', align: 'left', showOverflow: false, width: '10%' },\n          { field: 'col2', align: 'left', showOverflow: false, width: '25%' },\n          { field: 'col3', align: 'left', showOverflow: false, width: '10%' },\n          { field: 'col4', align: 'left', showOverflow: false, width: '25%' },\n          { field: 'col5', align: 'left', showOverflow: false, width: '10%' },\n          { field: 'col6', align: 'left', showOverflow: false, width: '20%' }\n        ],\n        data,\n        mergeCells: [\n          { row: 0, col: 1, rowspan: 1, colspan: 3 }\n        ]\n      };\n    },\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])]),n("p",[s._v("效果\n"),n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d1a46eeca3b4efb8606980ec8d685a7~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),n("p",[s._v("按照前文所述思路，使用resetTableCenterBorder函数后，就没这个问题了，")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<vxe-grid v-bind=\"{cellStyle: resetTableCenterBorder()}\" />\n\n// 实现表内部与外部线-粗细一致\n    resetTableCenterBorder(obj = {}, callback) {\n      const _obj = {\n        'background-color': 'white',\n        'border-collapse': 'collapse',\n        'border-color': 'black',\n        'background-image': 'none',\n        'font-size': '17px',\n        'font-weight': 600,\n        color: 'black',\n        padding: '3px 10px',\n        ...obj\n      };\n      return ({ rowIndex, columnIndex }) => {\n        let changeObject = {};\n        if (!rowIndex && !columnIndex) {\n          changeObject = {\n            border: '1px solid black',\n            ..._obj\n          };\n        }\n        if (!rowIndex && columnIndex) {\n          changeObject = {\n            'border-top': '1px solid black',\n            'border-right': '1px solid black',\n            'border-bottom': '1px solid black',\n            ..._obj\n          };\n        }\n        if (rowIndex && !columnIndex) {\n          changeObject = {\n            'border-left': '1px solid black',\n            'border-right': '1px solid black',\n            'border-bottom': '1px solid black',\n            ..._obj\n          };\n        }\n        if (rowIndex && columnIndex) {\n          changeObject = {\n            'border-right': '1px solid black',\n            'border-bottom': '1px solid black',\n            ..._obj\n          };\n        }\n        callback && callback(changeObject, rowIndex, columnIndex);\n        return changeObject;\n      };\n    }\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/88f0b3ae01c049ea8f435195f2bf61a2~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),n("h2",{attrs:{id:"使用html的table相关标签"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用html的table相关标签"}},[s._v("#")]),s._v(" 使用html的table相关标签")]),s._v(" "),n("p",[s._v("添加以下代码，释放table的可编程能力")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#html-table {\n  table-layout: fixed;\n  word-break: break-all;\n  word-wrap: break-word; //表格固定布局\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("通常我会直接写一下大体的样式，先规范table的样式，方便后面修改")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#html-table {\n  table-layout: fixed;\n  word-break: break-all;\n  word-wrap: break-word; //表格固定布局\n  text-align:center;\n  font-weight: 600;\n  th, td {\n    padding: 6px;\n  }\n  th {\n    height: 50px;\n  }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("使用html自带的table相关标签的好处是可以实现复杂表，如嵌套表、动态列数量。th嵌套div标签就能实现下文中提到的表头斜线。")]),s._v(" "),n("h2",{attrs:{id:"其它第三方库-el-table"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#其它第三方库-el-table"}},[s._v("#")]),s._v(" 其它第三方库：el-table")]),s._v(" "),n("h1",{attrs:{id:"二-div-模拟表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-div-模拟表"}},[s._v("#")]),s._v(" 二 div 模拟表")]),s._v(" "),n("p",[s._v("使用div写表，用border模拟单元格边框。可以定制化表。缺点在于，复杂表时，跨行会让样式错乱，具体表现当使用flex布局配合word-break：all在border模拟的边框竖线无法与上下行对齐，当使用百分比的宽度时，也能实现，当要求动态列时，这个方法有一定的局限，必须要每次计算好列的百分比。")]),s._v(" "),n("p",[s._v("关键属性：")]),s._v(" "),n("p",[s._v("box-sizing:content-box")]),s._v(" "),n("p",[s._v("flex-shrink:0")]),s._v(" "),n("p",[s._v("width: 20%; 使用百分比时，内容不会撑开，flex布局会。")]),s._v(" "),n("p",[s._v("border")]),s._v(" "),n("h1",{attrs:{id:"三-使用table标签"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三-使用table标签"}},[s._v("#")]),s._v(" 三 使用table标签")]),s._v(" "),n("p",[s._v("2023-03-23，最近几天的需求就是在做打印的一个表，table是我的第三个方案，他不存在上述div的问题。近乎完美的方案。表内定制部分，直接写个标签包裹住就行了，不用管border；没有跨行问题。")]),s._v(" "),n("h1",{attrs:{id:"四-拓展"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四-拓展"}},[s._v("#")]),s._v(" 四 拓展")]),s._v(" "),n("h2",{attrs:{id:"如何实现表头第一个单元格内的反斜杠-该单元格填两个值-一个左下-一个右上。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何实现表头第一个单元格内的反斜杠-该单元格填两个值-一个左下-一个右上。"}},[s._v("#")]),s._v(" 如何实现表头第一个单元格内的反斜杠，该单元格填两个值，一个左下，一个右上。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/045a8145107f4ee7a68947e88cb1fa0c~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),n("p",[s._v("代码实现")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('\n<th style="overflow:hidden" colspan="2">\n  <div class="first-col">\n    <div class="first-col-top">名字</div>\n    <div class="first-col-bottom">骨龄</div>\n  </div>\n</th>\n\n// 表头斜线\n.first-col {\n  position: relative;\n  height: 20px;\n}\n.first-col:before {\n  content: "";\n  position: absolute;\n  left: -15px;\n  // left: -30px;\n  top: 10px;\n  width: 300px;\n  height: 1px;\n  transform: rotate(18deg);\n  background-color: black;\n}\n.first-col .first-col-top {\n  position: absolute;\n  right: 4px;\n  top: -10px;\n}\n.first-col .first-col-bottom {\n  position: absolute;\n  left: 4px;\n  bottom: -10px;\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br")])]),n("p",[s._v("利用伪类画斜线，单元格overflow：hidden，溢出隐藏。两个文字的位置是定位实现的。斜线倾斜角度需要慢慢调。")]),s._v(" "),n("h2",{attrs:{id:"浏览器的打印界面对web网页有缩放效果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的打印界面对web网页有缩放效果"}},[s._v("#")]),s._v(" 浏览器的打印界面对web网页有缩放效果")]),s._v(" "),n("p",[s._v("有时候并不是写了多少像素，打印出来就是多少像素。预览的效果跟body下直接子元素的宽度有关。")]),s._v(" "),n("p",[s._v("实际开发中，我用谷歌浏览器测试效果。如果是A4，我会将宽度设置为1000px；如果是A5，则设置700px。这是开发经验。")]),s._v(" "),n("h2",{attrs:{id:"打印页眉页脚-1-9-共九页-当前在第一页-的实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#打印页眉页脚-1-9-共九页-当前在第一页-的实现"}},[s._v("#")]),s._v(" 打印页眉页脚 1/9 [共九页，当前在第一页]的实现")]),s._v(" "),n("h2",{attrs:{id:"二维码-条形码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二维码-条形码"}},[s._v("#")]),s._v(" 二维码/条形码")]),s._v(" "),n("p",[s._v("有时用户会有这种需求，需要扫描二维码/条形码。二维码每次用的时候都要new一下，而且当二维码的数据变化，不会动态去刷新二维码，所以我二次封装了二维码组件，见"),n("code",[s._v("开发经验-qrcode二次封装")]),s._v("，而条形码没有这种问题，barcode，当code变化能更新条形码，就很人性化。")])])}),[],!1,null,null,null);n.default=t.exports}}]);